# 项目技术文档

## 系统架构

- 基于Spring Boot 3.x构建
- 使用Spring Security实现认证授权
- Thymeleaf模板引擎渲染视图
- H2内存数据库(开发环境)
- JPA/Hibernate实现数据持久化

## 安全实现

- 密码使用BCrypt加密存储
- 基于角色的访问控制(USER/ADMIN)
- 自定义登录页面(/login-page)
- 开放路径：
  - 首页、注册、登录、静态资源
  - H2控制台(开发环境)
- 管理员路径需要ADMIN角色

## 核心功能实现

### 用户认证

- 注册流程：
  - 检查用户名唯一性
  - 密码加密存储
  - 默认角色为USER
- 登录流程：
  - 自定义登录页面
  - 集成Spring Security认证
- 用户中心：
  - 查看个人信息
  - 修改昵称
  - 修改密码
  - 删除账户

### 商品管理

- 商品分类管理
- 商品列表分页展示
- 商品详情页
- 初始化数据：
  - 10个商品分类
  - 25个示例商品

### 购物车

- 添加/删除商品
- 修改商品数量
- 清空购物车
- 基于用户会话的购物车管理

### 订单管理

- 从购物车创建订单
- 查看历史订单
- 删除订单

## 数据库设计

- 使用JPA自动生成表结构(ddl-auto=update)
- 主要实体：
  - User - 用户信息
  - Product - 商品信息  
  - Category - 商品分类
  - CartItem - 购物车项
  - Order - 订单主表
  - OrderItem - 订单明细

## 与旧系统对比

1. 技术栈升级：
   - 从Servlet/JSP迁移到Spring Boot
   - 原生JDBC改为JPA/Hibernate
   - 添加Spring Security安全框架
   - 引入Thymeleaf模板引擎

2. 功能改进：
   - 密码加密存储
   - 更完善的用户管理
   - 购物车状态持久化
   - 订单事务管理
   - 管理员控制台更安全

3. 性能优化：
   - 数据库连接池
   - 缓存常用数据
   - 减少数据库查询
